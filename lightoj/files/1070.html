<!DOCTYPE HTML>
<html>

<head>
	<title> Problem 1070</title>
	<meta name="description" content="website description" />
	<meta name="keywords" content="website keywords, website keywords" />
	<meta http-equiv="content-type" content="text/html; charset=windows-1252" />
	<link rel="stylesheet" type="text/css" href="../style/style.css" />
	<link rel="icon" type="image/png" href="style/favi.png">
	<script type="text/javascript" src="../scripts/shCore.js"></script>
	<script type="text/javascript" src="../scripts/shBrushCpp.js"></script>
	<link type="text/css" rel="stylesheet" href="../styles/shCoreDefault.css"/>
	<script type="text/javascript">SyntaxHighlighter.all();</script>
</head>

<body>
	<div id="main">
		<div id="header">
			<div id="logo">
				<h1>LightOJ Solutions</h1>
			</div>
			<div id="menubar">
				<ul id="menu">
					<li class="current"><a>1070</a></li>
					<li><a href="../">List of Problems</a></li>
					<li><a href="../tags">Search by Tags</a></li>
				</ul>
			</div>
		</div>
		<div id="site_content">
			<div id="sidebar_container">
				<img class="paperclip" src="../style/paperclip.png" alt="paperclip" />
				<div class="sidebar">
				<!-- insert your sidebar items here -->
				<h3>About Me</h3>
				<h3><a href="https://www.facebook.com/utk3995">Utkarsh Srivastava</a></h3><br/>
				<p> Student of IIIT Allahabad </p>
				<h5>Programmer | Developer | Reader<br/><br/></h5>
				</div>
			</div>
			<div id="content">
<h1><u>Question Code</u> : 1070</h1>
<h1><u>Problem Name</u> : <a href=http://lightoj.com/volume_showproblem.php?problem=1070 target="_blank" > Problem 1070 - Algebraic Problem</a></h1><br/>
<h3><u>Problem Tags</u> : 
<a href= ../tags/Matrix%20Exponentiation.html>Matrix Exponentiation</a><br/><br/>
<h3><u>Problem Statement</u> : </h3>

<p class=MsoNormal>Given the value of <b>a+b</b> and <b>ab</b> you will have to 
find the value of <b>a<sup>n</sup>+b<sup>n</sup></b>. <b>a</b> and <b>b</b> not 
necessarily have to be real numbers.</p> 

<br/><h3><u>Code</u> : </h3>
<pre class="brush: cpp;">
#include&lt;bits/stdc++.h&gt;
using namespace std;

#define ll long long int
#define ull unsigned long long int
#define pii pair&lt;int,int&gt;
#define pll pair&lt;ll,ll&gt;
#define vi vector&lt;int&gt;
#define pb push_back
#define mp make_pair
#define fr first
#define se second

// bits algorithm

inline int two(int n) { return 1 &lt;&lt; n; }
inline int test(int n, int b) { return (n&gt;&gt;b)&1; }
inline void set_bit(int & n, int b) { n |= two(b); }
inline void unset_bit(int & n, int b) { n &= ~two(b); }
inline int last_bit(int n) { return n & (-n); }
inline int ones(int n) { int res = 0; while(n && ++res) n-=n&(-n); return res; }

#define N 3

void mul(ll a[N][N],ll b[N][N])
{
    ll d[N][N]={};
    for(int i=0;i&lt;N;i++)
        for(int j=0;j&lt;N;j++)
            for(int k=0;k&lt;N;k++)
                d[i][j]=(d[i][j]+(a[i][k]*b[k][j]));
    for(int i=0;i&lt;N;i++)
        for(int j=0;j&lt;N;j++)
            a[i][j]=d[i][j];
}

ull matrixExpo(ull p,ull q,ull n)
{
    ll mat[N][N] = {{p,-q,0},{1,0,0},{0,1,0}};
    ll ans[N][N] = {{p,-q,0},{1,0,0},{0,1,0}};
    if (n==0) return 2;
    if (n==1) return p;
    if (n==2) return p*p - 2*q;
    n=n-2;
    while (n){
        if (n%2)
            mul(ans,mat);
        mul(mat,mat);
        n=n/2;
    }
    ll ret ((ans[1][0]*(p*p-2*q)) + (ans[1][1]*(p)) + (ans[1][2]*(2)));
    ull rett = ret;
    return rett;
}



int main ()
{
	//freopen("input.txt","r",stdin);
	ios_base::sync_with_stdio(false);
    int t;
    cin&gt;&gt;t;
    int cas=1;
    while (t--){
        cout&lt;&lt;"Case "&lt;&lt;cas++&lt;&lt;": ";
        ull p,q,n;
        cin&gt;&gt;p&gt;&gt;q&gt;&gt;n;
        cout&lt;&lt;matrixExpo(p,q,n)&lt;&lt;endl;
    }
	return 0;
}

			</div>
		</div>
		<div id="footer">
			<p> Last Updated on : <a>Tue, 15 Aug 2017</a></p>
		</div>
	</div>
</body>
</html>
